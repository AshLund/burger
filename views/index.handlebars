
<h1> Eat the Burger! </h1>

<div class="row">
    <div class="col-md-6">
      <div id="ready_to_eat">


  {{#each burgers}}
    {{#unless this.devoured}}
    <form action="burger/eat/{{id}}" method="POST"></form>

  <li class="form-control">{{id}}. {{burger_name}}</li>

	<button class="devour" data-id="{{this.id}}"> DEVOUR! </button>

            </div>
          </form>
          {{/unless}}
        {{/each}}

      </div>
    </div>


<h2> Add a Burger to Eat </h2>
<form class="create-form">

  <div class="form-group">
    <label for="burger"> New Burger </label>
    <input type="text" id="burger" name="name">
  </div>


  <button type="submit">Add Burger </button>
</form>

<script>

 $(".create-form).on("submit", function(event) {
    
    event.preventDefault();

    var newBurger = {
      burger_name: $("#burger").val().trim(),
    };
 console.log(newBurger)
   
    $.ajax("/api/burgers", {
      type: "POST",
      data: newBurger
    }).then(
      function() {
        location.reload();
      }
    );
  });

  $(".devour").on("click", function(event) {
    var id = $(this).data("id");

    // Send the DELETE request.
    $.ajax("/api/burgers/" + id, {
      type: "DELETE"
      devoured: true;
    }).then(
      function() {
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });
});

</script>