
<h1> Eat the Burger! </h1>

<div class="row">
  <center>
    <!-- Left side (ready to eat) -->
    <div class="col-md-6">
      <h4 class="red_font"> Eat The Burger!! </h4>
      <div id="ready_to_eat">


  {{#each burgers}}
    {{#unless this.devoured}}
    <form action="burger/eat/{{id}}" method="POST"></form>

  <li class="form-control">{{id}}. {{burger_name}}</li>
    <span class="input-group-btn"></span>

	<button class="devour" data-id="{{this.id}}"> DEVOUR! </button>
    </span>
            </div>
          </form>
          {{/unless}}
        {{/each}}

      </div>
    </div>


<h2> Add a Burger to Eat </h2>
<form class="create-form">

  <div class="form-group">
    <label for="burger"> Burger Name </label>
    <input type="text" id="burger_name" name="name">
  </div>


  <button type="submit">Add Burger </button>
</form>

<script>

 $(".create-form").on("submit", function(event) {
    
    event.preventDefault();

    var newBurger = {
      name: $("#burger_name").val().trim(),
    };

   
    $.ajax("/api/burgers", {
      type: "POST",
      data: newBurger
    }).then(
      function() {
        location.reload();
      }
    );
  });

  $(".devour").on("click", function(event) {
    var id = $(this).data("id");

    // Send the DELETE request.
    $.ajax("/api/burgers/" + id, {
      type: "DELETE"
      devoured: true;
    }).then(
      function() {
        console.log("deleted cat", id);
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });
});

</script>