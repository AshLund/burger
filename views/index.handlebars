
<h1> Eat the Burger! </h1>

<ul>
  {{#each burgers}}
    {{#unless this.devoured}}

  	{{burger_name}}

	<button class="devour" data-id="{{this.id}}"> DEVOUR! </button>
  {{/each}}
</ul> --}}


<h2> Add a Burger to Eat </h2>
<form class="create-form">

  <div class="form-group">
    <label for="ca"> Burger Name </label>
    <input type="text" id="burger_name" name="name">
  </div>


  <button type="submit">Add Burger </button>
</form>

<script>

 $(".create-form").on("submit", function(event) {
    
    event.preventDefault();

    var newBurger = {
      name: $("#burger_name").val().trim(),
    };

   
    $.ajax("/api/burgers", {
      type: "POST",
      data: newBurger
    }).then(
      function() {
        location.reload();
      }
    );
  });

  $(".devour").on("click", function(event) {
    var id = $(this).data("id");

    // Send the DELETE request.
    $.ajax("/api/burgers/" + id, {
      type: "DELETE"
      devoured: true;
    }).then(
      function() {
        console.log("deleted cat", id);
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });
});

</script>